(this["webpackJsonproom-system-frontend"]=this["webpackJsonproom-system-frontend"]||[]).push([[0],{133:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(1),s=n.n(i),o=n(72),r=n.n(o),c=(n(133),n(25)),d=n(26),u=n(29),l=n(28),h=n(97),b=n(9),m=n(122),j=n.n(m),p=n(64);n(146),n(148);p.a.initializeApp({apiKey:"AIzaSyDgkUWXFV25qNkSICMSUMavPo648VTwA8k",authDomain:"room-system-firebase.firebaseapp.com",databaseURL:"https://room-system-firebase.firebaseio.com",projectId:"room-system-firebase",storageBucket:"room-system-firebase.appspot.com",messagingSenderId:"918701774845",appId:"1:918701774845:web:460a0cc64b03748d516b94"});p.a.auth(),p.a.database();var g=p.a,f=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={isLoading:!0,signedIn:!1},e._isMounted=!1,e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,g.auth().onAuthStateChanged((function(t){t?e._isMounted&&e.setState({isLoading:!1,signedIn:!0}):e._isMounted&&e.setState({isLoading:!1,signedIn:!1})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return this.state.isLoading?Object(a.jsx)(j.a,{active:!0,spinner:!0,text:"Loading..."}):this.state.signedIn?this.props.children:Object(a.jsx)(b.a,{to:"/signin"})}}]),n}(s.a.Component),O=n(249),v=n(250),y=n(251),x=n(252),S=n(253),L=n(254),M=n(255),k=n(127),w=n(84),C=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={isLoading:!0},e._isMounted=!1,e}return Object(d.a)(n,[{key:"handleOnSubmit",value:function(e){var t=this;this._isMounted&&this.setState({isLoading:!0}),g.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){t.props.history.push("/"),t._isMounted&&t.setState({isLoading:!1})})).catch((function(e){t._isMounted&&t.setState({isLoading:!1}),alert(e)}))}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,g.auth().onAuthStateChanged((function(t){e.setState({isLoading:!1})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return Object(a.jsx)(k.a,{initialValues:{email:"",password:""},onSubmit:function(t){return e.handleOnSubmit(t)},validationSchema:w.a().shape({email:w.b().email().required(),password:w.b().required()}),children:function(t){var n=t.handleSubmit,i=t.handleChange,s=t.handleBlur,o=t.values,r=t.errors,c=t.touched;return Object(a.jsxs)(O.a,{onSubmit:n,children:[Object(a.jsxs)(v.a,{children:[Object(a.jsx)(y.a,{for:"email",children:"Email"}),Object(a.jsx)(x.a,{type:"email",name:"email",id:"email",value:o.email,onChange:i,onBlur:s,invalid:!(!c.email||!r.email)}),Object(a.jsx)(S.a,{children:r.email})]}),Object(a.jsxs)(v.a,{children:[Object(a.jsx)(y.a,{for:"password",children:"Password"}),Object(a.jsx)(x.a,{type:"password",name:"password",id:"password",value:o.password,onChange:i,onBlur:s,invalid:!(!c.password||!r.password)}),Object(a.jsx)(S.a,{children:r.password})]}),Object(a.jsxs)(L.a,{color:"primary",type:"submit",disabled:e.state.isLoading,children:[Object(a.jsx)(M.a,{size:"sm",color:"light",hidden:!e.state.isLoading}),"\u30ed\u30b0\u30a4\u30f3"]})]})}})}}]),n}(s.a.Component),I=Object(b.g)(C),A=n(85),D=n(126),_=(n(245),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={isLoading:!0},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.database().ref("sensor").child("environment").orderByChild("timestamp").limitToLast(12).on("value",(function(t){var n=t.val();e.setState({isLoading:!1,sensorData:n})}))}},{key:"render",value:function(){var e=this.state.sensorData;if(!e)return Object(a.jsx)("div",{className:"Loading",children:"Loading..."});var t=Object.entries(e),n={labels:t.map((function(e){var t=Object(A.a)(e,2);t[0];return t[1].timestamp})),datasets:[{label:"\u660e\u308b\u3055",yAxisID:"light",data:t.map((function(e){var t=Object(A.a)(e,2);t[0];return t[1].light})),fill:!0,lineTension:!1},{label:"\u5ba4\u6e29",yAxisID:"temperature",data:t.map((function(e){var t=Object(A.a)(e,2);t[0];return t[1].temperatureCelsius}))}]};return Object(a.jsx)("div",{className:"SensorChart",children:Object(a.jsx)(D.Line,{data:n,options:{scales:{xAxes:[{type:"time",time:{displayFormats:{minute:"HH:mm"}}}],yAxes:[{id:"light",position:"left",scaleLabel:{display:!0,labelString:"\u660e\u308b\u3055\uff08\u96fb\u5727\u5024\u22661023\uff09"},ticks:{suggestedMin:0,suggestedMax:1023}},{id:"temperature",position:"right",scaleLabel:{display:!0,labelString:"\u5ba4\u6e29\uff08\u6442\u6c0f\uff09"},ticks:{suggestedMin:10,suggestedMax:30}}]}}})})}}]),n}(s.a.Component)),B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"Home",children:Object(a.jsx)(_,{})})}}]),n}(s.a.Component),F=(n(246),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsx)(h.a,{children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{exact:!0,path:"/signin",component:I}),Object(a.jsx)(f,{children:Object(a.jsx)(b.d,{children:Object(a.jsx)(b.b,{exact:!0,path:"/",component:B})})})]})})}}]),n}(s.a.Component)),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,256)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),s(e),o(e)}))};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(F,{})}),document.getElementById("root")),P()}},[[247,1,2]]]);
//# sourceMappingURL=main.6e99c400.chunk.js.map